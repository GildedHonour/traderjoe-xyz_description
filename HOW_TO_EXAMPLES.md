# Как готовить примеры

```
node examples/fuji/{example1}.js
```

## Swaps

Алгоритм:

 - вызвать `approve(...)` для токена(ов), и только для токенов, указав необходимое кол-во
 - вызвать swap(...)


Есть вида типов функций для обмена:

  - между родным активом и токенами (1) 
  - между токенами (2)

Родным активом считается, например, AVAX - на блокчейне Avalanche, ETH - на блокчейне Ethereum, и т.п.

(1)

   - `swapExactAVAXForTokens(...)`
   - `swapAVAXForExactTokens(...)`
   - `swapTokensForExactAVAX(...)`
   - `swapExactTokensForAVAX(...)`

У всех этих функций в название фигурирует название исходного актива - AVAX.
Так как идёт обмен AVAX <-> token1, в данных функциях нужно передавать в аргументах адрес только этого токена token1
Кол-во AVAX указывается с помощью фигурных скобок в параметре "value"

**примечание**:

Цену газа и его кол-во иногда, в некоторые функции, нужно передавать, а иногда нет [от чего зависит? не ясно]
Если падает с ошибкой "не могу рассчитать необходимое кол-во газа", то нужно передать кол-во газа.
И аналогично, если падает с ошибкой "non-payable method cannot override value", то, соответственно, передать кол-во газа не нужно.

**пример**:

```
  const amountOut = 0; //TODO нужно рассчитать с помощь спец. функции router, но ноль сработает тоже

  const tx = await router.swapExactAVAXForTokens(
    amountOut,
    [addresses.WAVAX, addresses.token0],
    addresses.mine,
    ethers.BigNumber.from(utilities.minutesFromNow(30)),
    {
        ...gas,
        value: AVAXAmount, // кол-во AVAX
    }
  );
```

(2) 

У всех этих функций в названиях фигурирует только "...token(s)..", а не AVAX.
Так как идёт обмен token1 <-> token2, в данных функциях нужно передавать в аргументах адреса и кол-во обоих токенов.
Функции вызываются и работают аналогично (1)


## Liquidity pools

Пул ликвидности (LP) - это смарт-контракт, который принимает на вход пару из активов и возвращает (или "отправляет на указанный адрес") LP токены.
Чем больше ликвидности предоставляет участник, тем больше LP токенов он получает в замен.

Для чего нужны LP токены?

  - Как доказательство того, что он предоставил ликвидность в LP
  - И, как следствие, для дальнейшего получения части комиссий от обменов в данном LP

#### добавить ликвидность в LP

Алгоритм:

 - вызвать `approve(...)` для токена(ов), и только для токенов, указав необходимое кол-во
 - вызвать addLiquidity(...)


Есть вида типов функций:

  - с родным активом и токенами (1)
  - с токенами (2)


(1)

`addLiquidityAVAX(...)`

Так как идёт отправка в LP пары (AVAX, token1), в данную функцию нужно передавать в аргументах адрес только этого токена token1
Кол-во AVAX указывается с помощью фигурных скобок в параметре "value"


(2)

`addLiquidity(...)`

Так как идёт отправка в LP пары (token1, token2), в данную функцию нужно передавать в аргументах адреса и кол-во обоих токенов.
Функция вызывается и работает аналогично (1)

**пример**:
```
  const largeAmount = ethers.utils.parseEther('100');

  const tx = await router.addLiquidityAVAX(
    addresses.token0,
    largeAmount,
    0,
    0,
    addresses.mine,
    ethers.BigNumber.from(utilities.minutesFromNow(30))
  )
```

#### удалить ликвидность из LP

Алгоритм:

 - вызвать `approve(...)` для токена(ов), и только для токенов, указав необходимое кол-во
 - вызвать removeLiquidity(...)

в целом, всё аналогично добавлению ликвидности в LP.



## Yield Farming

[TODO]


YF - это отправка LP токенов, полученных за наполнение LP-ов, в смартконтракт на хранение на определённое время и получение за это
вознаграждения в виде ... [др. токенов или ]

Алгоритм:

  - узнать ID LP-a
  - [?] вызвать `approve(...)` для LP токена [?]
  - для отправки депозита, вызвать `MasterChefV3#deposit(LP_ID, myAmount)`
  - ...ждём дни, недели или месяцы...
  - проверить, сколько "урожая созрело", вызвать `MasterChefV3#pendingTokens(LP_ID, myAddr)`
  - для снятия депозита, или чтобы "пожать урожай", вызвать `MasterChefV3#deposit(LP_ID, 0)`
  - чтобы полностью выйти из YP, вызвать `MasterChefV3#withdraw(LP_ID, myAmount)`



## Вопросы и непонятные моменты